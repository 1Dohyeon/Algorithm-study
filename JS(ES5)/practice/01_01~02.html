<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <title>01-02 복습</title>
  <script src="js/partial.js"></script>
  <script src="js/_.js"></script>

</head>
<body>

<script>
var users = [
  { id: 1, name: 'ID', age: 36 },
  { id: 2, name: 'BJ', age: 32 },
  { id: 3, name: 'JM', age: 32 },
  { id: 4, name: 'PJ', age: 27 },
  { id: 5, name: 'HA', age: 25 },
  { id: 6, name: 'JE', age: 26 },
  { id: 7, name: 'JI', age: 31 },
  { id: 8, name: 'MP', age: 23 }
];


function _filter(lis,f){ // lis를 한바퀴 탐색하여 f조건에 적합하면 적합한 원소만 새로운 리스트로 거르는 filter함수, 객체와 함수를 받는 함수
    var new_lis=[];
    for(var i=0; i<lis.length; i++){
        if(f(lis[i])){
            new_lis.push(lis[i]);
        }
    }
    return new_lis;
}

function _map(lis, f){   // lis를 한바퀴 탐색하여 f조건에 적합한 새로운 원소의 특정 부분(id, name, ...)만 새로운 리스트에 담는 함수, 객체와 함수를 받는 함수 
    var new_lis=[];
    for(var i=0; i<lis.length; i++){
        new_lis.push(f(lis[i]));    // lis[i]에서도 함수 f가 특정한 부분만 push
    }
    return new_lis;
}
// filter랑 map이란 함수는 원래 array에 존재하기에 앞에 _ 를 붙여줌

// // each()를 이용
// function _each(list,f){
//   for(var i=0; i<list.length; i++){
//     f(list[i]);
//   }
//   return list;
// };

// function _filter(lis,f){ // lis를 한바퀴 탐색하여 f조건에 적합하면 적합한 원소만 새로운 리스트로 거르는 filter함수, 객체와 함수를 받는 함수
//     var new_lis=[];
//     _each(list, function(val){
//         if(f(val)) new_lis.push(val);
//     });
//     return new_lis;
// };

// function _map(lis,f){   // lis를 한바퀴 탐색하여 f조건에 적합한 새로운 원소의 특정 부분(id, name, ...)만 새로운 리스트에 담는 함수, 객체와 함수를 받는 함수 
//     var new_lis=[];
//     _each(list,function(val){
//         new_lis.push(f(val));
//     });
//     return new_lis;
// };

// 30세 이상인 사람들의 이름을 출력하는 함수

var over_30_name=_map(_filter(users, function(user){return user.age>=30;}), function(user){return user.name;})
console.log(
    over_30_name
);
// 27세 미만인 사람들의 이름과 나이 출력하는 함수

var under_27_name=_map(_filter(users, function(user){return user.age<27;}), function(user){return user.name;})
var under_27_age=_map(_filter(users, function(user){return user.age<27;}), function(user){return user.age;})
console.log(
    under_27_name,under_27_age
);

</script>

</body>
